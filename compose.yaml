services:
  fuiz-frontend:
    build:
      context: .
      dockerfile: docker/fuiz-frontend.Dockerfile
      args:
        PUBLIC_DISPLAY_PLAY_URL: http://localhost:5173
        PUBLIC_PLAY_URL: http://localhost:5173
        PUBLIC_BACKEND_URL: http://localhost:8787
        PUBLIC_WS_URL: ws://localhost:8787
        PUBLIC_CORKBOARD_URL: http://localhost:43907
    ports:
      - "5173:80"
    depends_on:
      - fuiz-backend
      - fuiz-corkboard

  fuiz-backend:
    build:
      context: .
      dockerfile: docker/fuiz-backend.Dockerfile
    environment:
      # Container listens on 8080 unless PORT is set
      PORT: "8080"
      # Optional: tighten CORS by setting NETWORK_ORIGIN and enabling expose-network (see README)
      # NETWORK_ORIGIN: "https://your-frontend-domain"
    ports:
      # Matches the website README’s example (PUBLIC_BACKEND_URL=http://localhost:8787)
      - "8787:8080"

  fuiz-corkboard:
    build:
      context: .
      dockerfile: docker/fuiz-corkboard.Dockerfile
    ports:
      # Matches the website README’s example (PUBLIC_CORKBOARD_URL=http://localhost:43907)
      - "43907:5040"
